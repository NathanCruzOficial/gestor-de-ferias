{% extends 'layouts/base.html' %}

{% block title %}Painel{% endblock %}

{% block content %}    
<!-- ================================================================================= -->

<div class="container">
  <h2>Lista de Usuários</h2>
  <table class="table table-striped table-hover table-bordered align-middle">
    <thead class="table-dark text-center">
      <tr>
        <th scope="col">ID</th>
        <th scope="col">Posto/Grad</th>
        <th scope="col">Nome</th>
        <th scope="col">Email</th>
        <th scope="col">Senha</th>
        <th scope="col">Ação</th>
      </tr>
    </thead>
    <tbody>
      {% for user in users %}
        <!-- Exibe o botão de deletar para todos, exceto o usuário logado -->
        <tr class="text-center">
            <td>{{ user.id }}</td>
            <td>{{ user.posto_grad }}</td>
            <td>{{ user.username }}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.password }}</td>
            <td class=" hstack">
              {% if current_user.id != user.id %}
                <form action="{{ url_for('user.delete_user', user_id=user.id) }}" method="POST">
                  <button type="submit" class="btn btn-danger"><i class="bi bi-trash3-fill"></i></button>
                  <form action="{{ url_for('user.user') }}" method="POST">
                    <button type="submit" class="btn btn-secondary" ><i class="bi bi-pencil-square"></i></button>
                  </form>
                </form>
                  {% else %}
                  <button class="btn btn-secondary" disabled><i class="bi bi-trash3-fill"></i></button>
                  {% endif %}
                </form>
            </td>
          </tr>          
      {% endfor %}
    </tbody>
  </table>
</div>

<!-- ================================================================================= -->
{% endblock %}
